
<html>
<head>




 <script src="js/angular.min.js"></script>
 
 <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
 <script src="js/bootstrap.min.js"></script>
 
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	
 
 </head>
<body ng-app="myApp" ng-controller="totalemployeesinprojectCtrl">


	<div class="container">
	
	
		<div class="row">
			<div class="col">
				<div class="col-lg-12">
					<div class="panel panel-primary">
						<div class="panel-heading"><center>Total Employees In Project</center><button class="button button5" ng-click="back()">BACK</button></div>
						<div class="panel-body">
						
						<div class="row">
						
						
<div class="form">
    
    <form class="login-form">
      <input  type="text" name="projectname" id="projectname" ng-model="params.projectname" placeholder="projectname"/><br>

<button ng-click="totalemployeesinproject(params)">Search</button>
    </form>
</div>
						
						
							</div>
							
					<div class="row">
								

							
							
							
									<div ng-repeat="x in result">
									
													<div class="col-lg-12">
	
				
											<fieldset>
                                  <legend>Project Details</legend>
										<h3>USER</h3>{{x._id}}	<h3>ResourceType</h3>{{x.resourcetype}}
									</fieldset>
									<br>
									<br>
                                 </div>
		                         
		
								</div>
								
							
								
							</div>
							
							<div class="row">
							<div class="col-lg-12">
								<h4>Number of Employees in Project</h4><b>{{totalcount}}</b>

                       </div>
							</div>
					
							
                    </div>
				</div>
			</div>
		</div>
	</div>
	
	
	</div>







<script>

<!-- AngularJS module define AngularJS applications -->
var app = angular.module('myApp', []);
app.controller('totalemployeesinprojectCtrl', function($scope,$http,$window) {
   
    
	
	$scope.totalemployeesinproject = function(params) {
	var projectname = params.projectname;
	
      var json = {

        "_id": projectname
		};
		
		
		
		$http.post("/totalemployeesinproject",json).then(function(response) {
            
			
			if (response.data.error == undefined) {
			console.log("TOTAL EMPS IN PROJECT"+JSON.stringify(response))
			$scope.result=response.data.result[0].employees;
				
				
                $scope.username = response.data.result[0].employees[0].username;
				
				$scope.resourcetype = response.data.result[0].employees[0].resourcetype;
				
				
               $scope.totalcount=response.data.result[0].employees.length;
				
				 
                
            } else {
                $window.alert('Project is not Present');

            }
			
			
			
			
			
        })
		
		
	}
	$scope.back = function() {
	
	window.location.assign("/managerprofile");
			
	}
	
	
	
	
});
</script>

</body>
</html>